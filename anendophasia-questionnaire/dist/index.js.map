{"version":3,"sources":["../stimuli.json","../src/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA,MACI;AAAA,QACI,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,cAAgB;AAAA,QAChB,cAAgB;AAAA,MACpB;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,cAAgB;AAAA,QAChB,cAAgB;AAAA,MACpB;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,cAAgB;AAAA,QAChB,cAAgB;AAAA,MACpB;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,cAAgB;AAAA,QAChB,cAAgB;AAAA,MACpB;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,cAAgB;AAAA,QAChB,cAAgB;AAAA,MACpB;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,cAAgB;AAAA,QAChB,cAAgB;AAAA,MACpB;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,cAAgB;AAAA,QAChB,cAAgB;AAAA,MACpB;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,cAAgB;AAAA,QAChB,cAAgB;AAAA,MACpB;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,cAAgB;AAAA,QAChB,cAAgB;AAAA,MACpB;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,QAAU;AAAA,QACV,cAAgB;AAAA,QAChB,cAAgB;AAAA,MACpB;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,MAAE;AAAA,QACE,QAAU;AAAA,QACV,QAAU;AAAA,MACd;AAAA,IACJ;AAAA;AAAA;;;ACrJA,OAAO,yBAAyB;AAChC,OAAO,iCAAiC;AAExC,IAAI,UAAU;AAEd,SAAS,YAAY,SAAgB,GAAa;AACjD,MAAI,SAAS,CAAC;AAEd,QAAM,iBAAiB,QAAQ,OAAO,CAAC,KAAK,SAAS;AACpD,QAAI,CAAC,IAAI,SAAS,KAAK,MAAM,GAAG;AAC/B,UAAI,KAAK,KAAK,MAAM;AAAA,IACrB;AACA,WAAO;AAAA,EACR,GAAG,CAAC,CAAC;AAEL,MAAI,CAAC,QAAQ,MAAM,YAAU,eAAe,SAAS,MAAM,CAAC,GAAG;AAC9D,UAAM,IAAI,MAAM,kEAAkE;AAAA,EACnF;AACA,MAAI,EAAE,OAAO,CAAC,GAAG,MAAM,IAAI,GAAG,CAAC,IAAI,QAAQ,QAAQ;AAClD,UAAM,IAAI,MAAM,oFAAoF;AAAA,EACrG;AAGA,MAAI,EAAE,UAAU,QAAQ,SAAS,GAAG;AACnC,QAAI,cAAc,EAAE,EAAE,SAAS,CAAC;AAChC,QAAI,EAAE,MAAM,GAAG,QAAQ,MAAM;AAAA,EAC9B,WAAW,EAAE,UAAU,QAAQ,QAAQ;AACtC,UAAM,IAAI,MAAM,4HAA4H;AAAA,EAC7I;AAGA,WAAS,IAAI,GAAG,IAAI,EAAE,QAAQ,KAAK;AAClC,QAAI,iBAAiB,QAAQ,OAAO,UAAQ,KAAK,UAAU,QAAQ,CAAC,CAAC;AACrE,QAAI,eAAe,SAAS,EAAE,CAAC,GAAG;AACjC,cAAQ,KAAK,2CAA2C,EAAE,CAAC,kBAAkB,QAAQ,CAAC,gEAAgE;AACtJ,UAAI,aAAa;AAChB,uBAAe,EAAE,CAAC,IAAI,eAAe;AAAA,MACtC,OAAO;AACN,YAAI,cAAc,EAAE,CAAC,IAAI,eAAe;AAAA,MACzC;AAAA,IACD;AACA,QAAI,oBAAoB,eAAe,KAAK,MAAM,MAAM,KAAK,OAAO,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,CAAC;AACpF,aAAS,OAAO,OAAO,iBAAiB;AAAA,EACzC;AACA,MAAI,aAAa;AAChB,QAAI,cAAc,QAAQ,OAAO,UAAQ,CAAC,OAAO,IAAI,OAAK,EAAE,MAAM,EAAE,SAAS,KAAK,MAAM,CAAC;AACzF,YAAQ,IAAI,WAAW;AACvB,aAAS,OAAO,OAAO,YAAY,KAAK,MAAM,MAAM,KAAK,OAAO,CAAC,EAAE,MAAM,GAAG,WAAW,CAAC;AAAA,EACzF;AACA,UAAQ,IAAI,MAAM;AAElB,SAAO;AACR;AAEO,SAAS,eAAe,SAAkB,UAA0C,CAAC,GAAG;AAC9F,MAAI,gBAAgB,CAAC;AAErB,QAAM,iBAAiB;AAAA,IAChB,SAAS,CAAC,QAAQ;AAAA,IACxB,eAAe,CAAC,EAAE;AAAA,EAChB;AAEA,YAAU,kCACH,iBACA;AAGV,MAAI,WAAW;AAAA,IACd,MAAM;AAAA,IACN,WAAW,MAAK;AAAA,MACf;AAAA,QACA,QAAQ,QAAQ,yBAAyB,QAAQ;AAAA,QACjD,QAAQ;AAAA,UACP;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,MACA;AAAA,IACC;AAAA,IACF,MAAM,MAAM;AACX,aAAO;AAAA,QACN,MAAM,QAAQ,yBAAyB,QAAQ;AAAA,MAChD;AAAA,IACD;AAAA,IACA,WAAW,SAAS,MAAM;AACzB,WAAK,QAAQ,KAAK,SAAS;AAAA,IAC5B;AAAA,EACD;AAEA,MAAI,kBAAkB;AAAA,IACrB,UAAU,CAAC,QAAQ;AAAA,IACnB,oBAAoB,YAAY,QAAQ,SAAS,QAAQ,aAAa;AAAA,IACtE,iBAAiB;AAAA,EAClB;AAEA,MAAI,gBAAgB;AAAA,IACnB,MAAM;AAAA,IACN,UAAU,WAAW;AAEpB,UAAI,OAAO,QAAQ,KAAK,IAAI;AAE5B,UAAI,OAAO;AACX,eAAS,UAAU,QAAQ,SAAS;AACnC,gBAAQ,MAAM,WAAW,KAAK,OAAO,EAAC,MAAM,OAAM,CAAC,EAAE,OAAO,OAAO,EAAE,KAAK,EAAE,QAAQ,CAAC;AAAA,MACtF;AACA,cAAQ;AAER,aAAO;AAAA,IAER;AAAA,EACD;AAEA,gBAAc,KAAK,iBAAiB,aAAa;AAEjD,SAAO;AACR;AAOO,IAAM,gBAAgB,CAAC;AAEvB,IAAM,QAAQ,CAAC","sourcesContent":["[\n    {\n        \"prompt\": \"I often enjoy the use of mental pictures to reminisce\",\n        \"factor\": \"visual\",\n        \"visual\": 0.785,\n        \"verbal\": 0.060,\n        \"orthographic\": 0.101,\n        \"manipulation\": 0.086\n    },{\n        \"prompt\": \"I can close my eyes and easily picture a scene that I have experienced\",\n        \"factor\": \"visual\",\n        \"visual\": 0.753,\n        \"verbal\": 0.026,\n        \"orthographic\": 0.139,\n        \"manipulation\": 0.096\n    },{\n        \"prompt\": \"My mental images are very vivid and photographic\",\n        \"factor\": \"visual\",\n        \"visual\": 0.740,\n        \"verbal\": 0.178,\n        \"orthographic\": 0.230,\n        \"manipulation\": 0.018\n    },{\n        \"prompt\": \"The old saying “A picture is worth a thousand words” is certainly true for me\",\n        \"factor\": \"visual\",\n        \"visual\": 0.685,\n        \"verbal\": 0.095,\n        \"orthographic\": 0.066,\n        \"manipulation\": 0.206\n    },{\n        \"prompt\": \"When I think about someone I know well, I instantly see their face in my mind\",\n        \"factor\": \"visual\",\n        \"visual\": 0.680,\n        \"verbal\": 0.023,\n        \"orthographic\": 0.120,\n        \"manipulation\": 0.063\n    },{\n        \"prompt\": \"I often use mental images or pictures to help me remember things\",\n        \"factor\": \"visual\",\n        \"visual\": 0.665,\n        \"verbal\": 0.097,\n        \"orthographic\": 0.140,\n        \"manipulation\": 0.074\n    },{\n        \"prompt\": \"My memories are mainly visual in nature\",\n        \"factor\": \"visual\",\n        \"visual\": 0.638,\n        \"verbal\": 0.046,\n        \"orthographic\": 0.001,\n        \"manipulation\": 0.004\n    },{\n        \"prompt\": \"When traveling to get to somewhere I tend to think more visually than verbally\",\n        \"factor\": \"visual\",\n        \"visual\": 0.612,\n        \"verbal\": 0.153,\n        \"orthographic\": 0.010,\n        \"manipulation\": 0.001\n    },{\n        \"prompt\": \"If I talk to myself in my head it is usually accompanied by visual imagery\",\n        \"factor\": \"visual\",\n        \"visual\": 0.542,\n        \"verbal\": 0.077,\n        \"orthographic\": 0.332,\n        \"manipulation\": 0.166\n    },{\n        \"prompt\": \"If I imagine my memories visually they are more often static than moving\",\n        \"factor\": \"visual\",\n        \"visual\": 0.418,\n        \"verbal\": 0.043,\n        \"orthographic\": 0.137,\n        \"manipulation\": 0.220\n    },{\n        \"prompt\": \"If I am walking somewhere by myself, I often have a silent conversation with myself\",\n        \"factor\": \"verbal\"\n    },{\n        \"prompt\": \"If I am walking somewhere by myself, I frequently think of conversations that I’ve recently had\",\n        \"factor\": \"verbal\"\n    },{\n        \"prompt\": \"My inner speech helps my imagination\",\n        \"factor\": \"verbal\"\n    },{\n        \"prompt\": \"I tend to think things through verbally when I am relaxing\",\n        \"factor\": \"verbal\"\n    },{\n        \"prompt\": \"When thinking about a social problem, I often talk it through in my head\",\n        \"factor\": \"verbal\"\n    },{\n        \"prompt\": \"I like to give myself some down time to talk through thoughts in my mind\",\n        \"factor\": \"verbal\"\n    },{\n        \"prompt\": \"I hear words in my \\\"mind's ear\\\" when I think\",\n        \"factor\": \"verbal\"\n    },{\n        \"prompt\": \"I hear words in my \\\"mind's ear\\\" when I think\",\n        \"factor\": \"verbal\"\n    },{\n        \"prompt\": \"I rarely vocalize thoughts in my mind\",\n        \"factor\": \"verbal\"\n    },{\n        \"prompt\": \"I often talk to myself internally while watching TV\",\n        \"factor\": \"verbal\"\n    },{\n        \"prompt\": \"My memories often involve conversations I've had\",\n        \"factor\": \"verbal\"\n    },{\n        \"prompt\": \"When I read, I tend to hear a voice in my \\\"mind's ear\\\"\",\n        \"factor\": \"verbal\"\n    },{\n        \"prompt\": \"When I hear someone talking, I see words written down in my mind\",\n        \"factor\": \"orthographic\"\n    },{\n        \"prompt\": \"I see words in my \\\"mind's eye\\\" when I think\",\n        \"factor\": \"orthographic\"\n    },{\n        \"prompt\": \"When I am introduced to someone for the first time, I imagine what their name would look like when written down\",\n        \"factor\": \"orthographic\"\n    },{\n        \"prompt\": \"A strategy I use to help me remember written material is imagining what the writing looks like\",\n        \"factor\": \"orthographic\"\n    },{\n        \"prompt\": \"I hear a running summary of everything I am doing in my head\",\n        \"factor\": \"orthographic\"\n    },{\n        \"prompt\": \"I rehearse in my mind how someone might respond to a text message before I send it\",\n        \"factor\": \"orthographic\"\n    },{\n        \"prompt\": \"I can easily imagine and mentally rotate three-dimensional geometric figures\",\n        \"factor\": \"manipulation\"\n    },{\n        \"prompt\": \"I can easily choose to imagine this sentence in my mind pronounced unnaturally slowly\",\n        \"factor\": \"manipulation\"\n    },{\n        \"prompt\": \"In school, I had no problems with geometry\",\n        \"factor\": \"manipulation\"\n    },{\n        \"prompt\": \"It is easy for me to imagine the sensation of licking a brick\",\n        \"factor\": \"manipulation\"\n    },{\n        \"prompt\": \"I find it difficult to imagine how a three-dimensional geometric figure would exactly look like when rotated\",\n        \"factor\": \"manipulation\"\n    },{\n        \"prompt\": \"I can easily imagine someone clearly talking, and then imagine the same voice with a heavy cold\",\n        \"factor\": \"manipulation\"\n    },{\n        \"prompt\": \"I think I have a large vocabulary in my native language compared to others\",\n        \"factor\": \"manipulation\"\n    },{\n        \"prompt\": \"I can easily imagine the sound of a trumpet getting louder\",\n        \"factor\": \"manipulation\"\n    }\n]","import {JsPsych} from \"jspsych\";\nimport jsPsychSurveyLikert from \"@jspsych/plugin-survey-likert\";\nimport jsPsychHTMLKeyboardResponse from \"@jspsych/plugin-html-keyboard-response\";\n\nvar stimuli = require('../stimuli.json')\n\nfunction buildSurvey(factors: any[], n: number[]) {\n\tvar survey = [];\n\n\tconst stimuliFactors = stimuli.reduce((acc, curr) => {\n\t\tif (!acc.includes(curr.factor)) {\n\t\t\tacc.push(curr.factor);\n\t\t}\n\t\treturn acc;\n\t}, []);\n\n\tif (!factors.every(factor => stimuliFactors.includes(factor))) {\n\t\tthrow new Error(\"One or more specified factors do not exist in the questionnaire.\");\n\t}\n\tif (n.reduce((a, b) => a + b, 0) > stimuli.length) {\n\t\tthrow new Error(\"The total number of questions requested exceeds the number of available questions.\");\n\t}\n\n\t// evaluate relationship between n and factors\n\tif (n.length == factors.length + 1) {\n\t\tvar n_nonfactor = n[n.length - 1];\n\t\tn = n.slice(0, factors.length);\n\t} else if (n.length != factors.length) {\n\t\tthrow new Error(\"Each value in num_questions must correspond to a factor in factors, with an optional extra value for non-factor questions.\");\n\t}\n\n\t// select questions\n\tfor (var i = 0; i < n.length; i++) {\n\t\tvar factorSelected = stimuli.filter(item => item.factor == factors[i]);\n\t\tif (factorSelected.length < n[i]) {\n\t\t\tconsole.warn(`Warning: Requested number of questions (${n[i]}) for factor \"${factors[i]}\" exceeds available questions. Using all available questions.`);\n\t\t\tif (n_nonfactor) {\n\t\t\t\tn_nonfactor += n[i] - factorSelected.length;\n\t\t\t} else {\n\t\t\t\tvar n_nonfactor = n[i] - factorSelected.length;\n\t\t\t}\n\t\t}\n\t\tvar questionsSelected = factorSelected.sort(() => 0.5 - Math.random()).slice(0, n[i]);\n\t\tsurvey = survey.concat(questionsSelected);\n\t}\n\tif (n_nonfactor) {\n\t\tvar stimuliLeft = stimuli.filter(item => !survey.map(s => s.prompt).includes(item.prompt));\n\t\tconsole.log(stimuliLeft);\n\t\tsurvey = survey.concat(stimuliLeft.sort(() => 0.5 - Math.random()).slice(0, n_nonfactor));\n\t}\n\tconsole.log(survey)\n\n\treturn survey;\n}\n\nexport function createTimeline(jsPsych: JsPsych, options: Partial<CreateTimelineOptions> = {}) {\n\tvar main_timeline = [];\n\n\tconst defaultOptions = {\n        factors: [\"verbal\"],\n\t\tnum_questions: [10],\n    }\n\n    options = {\n        ...defaultOptions,\n        ...options,\n    };\n\n\tvar question = {\n\t\ttype: jsPsychSurveyLikert,\n\t\tquestions: () =>[\n\t\t\t{\n\t\t\tprompt: jsPsych.evaluateTimelineVariable('prompt'), \n\t\t\tlabels: [\n\t\t\t\t\"Strongly Disagree\", \n\t\t\t\t\"Disagree\", \n\t\t\t\t\"Neutral\", \n\t\t\t\t\"Agree\", \n\t\t\t\t\"Strongly Agree\"\n\t\t\t]\n\t\t\t}\n  \t\t],\n\t\tdata: () => {\n\t\t\treturn {\n\t\t\t\ttask: jsPsych.evaluateTimelineVariable('factor')\n\t\t\t}\n\t\t},\n\t\ton_finish: function(data) {\n\t\t\tdata.score = data.response.Q0;\n\t\t}\n\t}\n\n\tvar survey_timeline = {\n\t\ttimeline: [question],\n\t\ttimeline_variables: buildSurvey(options.factors, options.num_questions),\n\t\trandomize_order: true,\n\t}\n\n\tvar debrief_block = {\n\t\ttype: jsPsychHTMLKeyboardResponse,\n\t\tstimulus: function() {\n\n\t\t\tvar data = jsPsych.data.get();\n\n\t\t\tvar html = `<p>Your scores are:</p>`\n\t\t\tfor (var factor of options.factors) {\n\t\t\t\thtml += `<p>${factor}: ${data.filter({task: factor}).select('score').mean().toFixed(2)}</p>`\n\t\t\t}\n\t\t\thtml += `<p>Press any key to complete the experiment. Thank you!</p>`;\n\n\t\t\treturn html;\n\t\t\n\t\t}\n\t};\n\n\tmain_timeline.push(survey_timeline, debrief_block);\n\n\treturn main_timeline;\n}\n\nexport interface CreateTimelineOptions {\n    factors: any[],\n\tnum_questions: number[],\n}\n\nexport const timelineUnits = {};\n\nexport const utils = {};\n"]}
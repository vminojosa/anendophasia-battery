{"version":3,"sources":["../src/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AACA,OAAO,uBAAuB;AAE9B,SAAS,oBAAoB,UAAU,WAAU;AAC7C,MAAI,oBAAoB,CAAC;AAEzB,WAAS,IAAE,GAAG,IAAE,UAAU,KAAI;AAC1B,QAAI,MAAI,GAAE;AACN,UAAI,mBAAuB,CAAC;AAC5B,uBAAiB,YAAY;AAAA,IACjC,OAAO;AACH,UAAI,mBAAuB,CAAC;AAC5B,uBAAiB,YAAY,kBAAkB,IAAE,CAAC,EAAE,cAAc,aAAa,gBAAgB;AAAA,IACnG;AACA,sBAAkB,KAAK,gBAAgB;AAAA,EAC3C;AACA,SAAO;AACX;AAEA,SAAS,kBAAkB,UAAS;AAChC,MAAI,YAAY,CAAC;AAEjB,WAAS,IAAE,GAAG,IAAE,SAAS,QAAQ,KAAI;AACjC,cAAU,KAAK,EAAE,KAAI,SAAS,CAAC,EAAE,CAAC;AAAA,EACtC;AAEA,UAAQ,IAAI,SAAS;AACrB,SAAO;AACX;AAMO,SAAS,eAAe,SAAkB,UAA0C,CAAC,GAAE;AAC1F,MAAI,gBAAgB,CAAC;AAErB,QAAM,iBAAiB;AAAA,IACnB,SAAS;AAAA,IACT,UAAU,CAAC,QAAQ,SAAS,MAAM;AAAA,IAClC,WAAW,EAAC,KAAK,SAAS,KAAK,MAAK;AAAA,IACpC,UAAU,EAAC,KAAK,KAAK,KAAK,IAAG;AAAA,EACjC;AAEA,YAAU,kCACH,iBACA;AAGP,QAAM,QAAQ;AAAA,IACV,MAAM;AAAA,IACN,WAAW,MAAM,CAAC;AAAA,MACd,QAAO;AAAA,wDAEH,QAAQ,yBAAyB,KAAK,MAAM,UAC5C,QAAQ,yBAAyB,WAAW,KAAK,aACjD,SAAS,QAAQ,UAAU,KAAK,MAAM,SAAS,QAAQ,UAAU,KAAK,MAAM;AAAA,kBAC1E,KAAK,MAAM,KAAK,OAAO,KAAK,KAAG,GAAG,IAAE;AAAA,kBACpC,QAAQ,yBAAyB,KAAK,MAAM,SAC1C,QAAQ,yBAAyB,WAAW,KAAK,aACjD,QAAQ,SAAS,KAAK,IAAI,QAAQ,SAAS,KAAK,IAAI;AAAA;AAAA,MAE5D,SAAS;AAAA,MACT,UAAU;AAAA,MACV,MAAK;AAAA,IACT,CAAC;AAAA,IACD,cAAc;AAAA,EAClB;AAEA,MAAI,gBAAgB;AAAA,IAChB,UAAU,CAAC,KAAK;AAAA,IAChB,oBAAoB;AAAA,MAChB,EAAE,KAAK,OAAO;AAAA,IAClB;AAAA,IACA,aAAa,QAAQ;AAAA,EACzB;AAEA,MAAI,iBAAiB;AAAA,IACjB,UAAU,CAAC,aAAa;AAAA,IACxB,oBAAoB;AAAA,MAChB,EAAE,WAAW,WAAW;AAAA,MACxB,EAAE,WAAW,cAAc;AAAA,IAC/B;AAAA,EACJ;AAEA,MAAI,eAAe;AAAA,IACf,UAAU,CAAC,KAAK;AAAA,IAChB,oBAAoB,oBAAoB,QAAQ,SAAS,UAAU;AAAA,EACvE;AAEA,MAAI,gBAAgB;AAAA,IAChB,UAAU,CAAC,YAAY;AAAA,IACvB,oBAAoB,kBAAkB,QAAQ,QAAQ;AAAA,EAC1D;AAEA,gBAAc,KAAK,gBAAgB,aAAa;AAEhD,SAAO;AACX;AASO,IAAM,gBAAgB,CAAC;AAEvB,IAAM,QAAQ,CAAC","sourcesContent":["import { JsPsych } from \"jspsych\"\nimport JsPsychSurveyText from \"@jspsych/plugin-survey-text\"\n\nfunction buildBlockVariables(n_trials, startWith){\n    var timelineVariables = []\n\n    for (var i=0; i<n_trials; i++){\n        if (i===0){\n            var timelineVariable:any = {}\n            timelineVariable.operation = startWith\n        } else {\n            var timelineVariable:any = {}\n            timelineVariable.operation = timelineVariables[i-1].operation === 'addition' ? 'subtraction' : 'addition'\n        }\n        timelineVariables.push(timelineVariable)\n    }\n    return timelineVariables\n}\n\nfunction buildCueVariables(cueOrder){\n    var variables = []\n\n    for (var i=0; i<cueOrder.length; i++){\n        variables.push({ cue:cueOrder[i] })\n    }\n    \n    console.log(variables)\n    return variables\n}\n\n// Things to add:\n// intro trials for each task\n// intro trial for whole timeline\n// input evaluation for data object\nexport function createTimeline(jsPsych:JsPsych,  options: Partial<CreateTimelineOptions> = {}){\n    var main_timeline = []\n\n    const defaultOptions = {\n        nTrials: 10,\n        cueOrder: ['sign', 'color', 'none'],\n        cueColors: {add: 'green', sub: 'red'},\n        cueSigns: {add: '+', sub: '-'}\n    }\n\n    options = {\n        ...defaultOptions,\n        ...options,\n    };\n\n    const trial = {\n        type: JsPsychSurveyText,\n        questions: () => [{\n            prompt:`\n            <div style=\"font-size:60px; padding:50px; ${\n                jsPsych.evaluateTimelineVariable('cue') === 'color' ? \n                jsPsych.evaluateTimelineVariable('operation') == 'addition' ? \n                `color:${options.cueColors['add']}` : `color:${options.cueColors['sub']}` : '' }\">\n                ${Math.floor(Math.random() * (96-13))+13}\n                ${jsPsych.evaluateTimelineVariable('cue') === 'sign' ? \n                    jsPsych.evaluateTimelineVariable('operation') == 'addition' ? \n                    options.cueSigns['add'] : options.cueSigns['sub'] : ''}\n            </div>`, \n            columns: 2, \n            required: true, \n            name:'question',\n        }],\n        button_label: \"Enter\"\n    }\n\n    var control_block = {\n        timeline: [trial],\n        timeline_variables: [\n            { cue: 'none' },\n        ],\n        repetitions: options.nTrials\n    }\n\n    var control_blocks = {\n        timeline: [control_block],\n        timeline_variables: [\n            { operation: 'addition' },\n            { operation: 'subtraction' }\n        ]\n    }\n\n    var switch_block = {\n        timeline: [trial],\n        timeline_variables: buildBlockVariables(options.nTrials, 'addition'),\n    }\n\n    var switch_blocks = {\n        timeline: [switch_block],\n        timeline_variables: buildCueVariables(options.cueOrder)\n    }\n\n    main_timeline.push(control_blocks, switch_blocks)\n\n    return main_timeline\n}\n\nexport interface CreateTimelineOptions {\n    nTrials: number,\n    cueOrder: string[],\n    cueColors: object,\n    cueSigns: object,\n}\n\nexport const timelineUnits = {}\n\nexport const utils = {}"]}